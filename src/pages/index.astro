---
import { getCollection } from "astro:content";
import Layout from "../components/layouts/Layout.astro";
import Grid from "../components/Grid.astro";
import PortfolioPreview from "../components/PortfolioPreview.astro";
import CallToAction from "../components/CallToAction.astro";

// Content Fetching: List four most recent work projects
const projects = (await getCollection("work"))
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 4);
---

<Layout>
  <!-- <div class="flex flex-row items-center justify-start mb-4 md:mb-8"></div> -->
  <div class="flex flex-raw justify-between items-start mb-4 md:mb-8">
    <div>
      <h1 class="mb-[-48px] lg:mb-[-48px] flex items-center flex-wrap">
        <span
          id="typed"
          class="text-4xl font-extrabold lg:text-5xl text-base-content"
          >Hello</span
        >
        <span class="not-prose ml-3 animate-waving-hand">
          <img
            src="/assets/waving-hand.webp"
            alt="waving hand"
            class="w-12 h-12"
            srcset="/assets/waving-hand.webp 1x, /assets/waving-hand.webp 2x"
          />
        </span>
         &nbsp;I'm&nbsp;
        <span
          class="font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-base-content to-indigo-500 dark:from-base-content dark:to-indigo-300"
        >
          Yan</span
        >
      </h1>
      <h2>
        I design and build
        <span
          class="highlight-heading animate-box-shadow dark:animate-winter-box-shadow"
          >things for the web.</span
        >
      </h2>
      <div class="text-xl font-semibold mb-2">
        Computer Science Student and Web Developer.
      </div>
    </div>
    <img
      class="not-prose ml-10 mt-0 w-[110px] min-w-[60px] border rounded-lg object-contain"
      src="./public/assets/portrait-preview1.png"
      alt="Yan smiling in a portrait photo."
    />
  </div>
  <div
    class="w-[300px] h-[300px] sm:w-[400px] sm:h-[400px] md:w-[500px] md:h-[500px] mx-auto mt-4  bg-laptop">
    <!-- Laptop image here -->
  </div>

  <!-- bg-gradient-to-r from-base-content to-indigo-500 dark:from-base-content dark:to-indigo-300 -->

    <section class="flex flex-col mt-8">
      <div class="flex flex-col gap-2 lg:gap-4">
        <div class="flex items-center">
        <h2 class="font-bold not-prose text-2xl lg:text-4xl mt-4 mb-0 text-base-content">Selected Work</h2>
        <span class="relative flex h-4 w-4 ml-2">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-200 dark:bg-indigo-900 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-4 w-4 bg-indigo-400 dark:bg-indigo-500"></span>
        </span>
        </div>
        <p class="not-prose text-lg lg:text-xl mt-0 font-semibold">
          Take a look below at some of my featured work from the
          past few months.
        </p>
      </div>

      <div class="gallery grid-cols-2 gap-4 justify-items-center">
        <Grid variant="offset">
          {
            projects.map((project: any) => (
              <li>
                <PortfolioPreview project={project} />
              </li>
            ))
          }
        </Grid>
      </div>

      <div class="cta">
        <CallToAction href="/work/">
          View All
          <!--  <Icon icon="arrow-right" size="1.2em" /> -->
        </CallToAction>
      </div>
    </section>
  </main>
</Layout>
